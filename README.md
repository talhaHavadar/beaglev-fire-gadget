# Build Dependencies
sudo apt install bmap-tools dosfstools libyaml-dev mtools libelf-dev libssl-dev bison flex u-boot-tools genimage

# Reference
https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu


# system-boot partition not bootable WORKAROUND
With the images generated by using `.image/beaglev-fire-ubuntu-server.yaml` file. There is a bug in current ecosystem that does not mark the `system-boot` partition as bootable. To fix the issue please apply the same steps below to the image file generated by `ubuntu-image` tool.

```
sudo gdisk <your-image-file-name.img>
GPT fdisk (gdisk) version 1.0.8

Partition table scan:
  MBR: protective
  BSD: not present
  APM: not present
  GPT: present

Found valid GPT with protective MBR; using GPT.

Command (? for help): x

Expert command (? for help): a
Partition number (1-3): 2
Known attributes are:
0: system partition
1: hide from EFI
2: legacy BIOS bootable
60: read-only
62: hidden
63: do not automount

Attribute value is 0000000000000000. Set fields are:
  No fields set

Toggle which attribute field (0-63, 64 or <Enter> to exit): 2
Have enabled the 'legacy BIOS bootable' attribute.
Attribute value is 0000000000000004. Set fields are:
2 (legacy BIOS bootable)

Toggle which attribute field (0-63, 64 or <Enter> to exit):

Expert command (? for help): w

Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING
PARTITIONS!!

Do you want to proceed? (Y/N): Y
OK; writing new GUID partition table (GPT) to beaglev-fire-server.img.
Warning: The kernel is still using the old partition table.
The new table will be used at the next reboot or after you
run partprobe(8) or kpartx(8)
The operation has completed successfully.
```
